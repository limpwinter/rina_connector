@startuml

scale  2048 width
scale  1600 height
package "Model" {

'class RabbitMQ{
'-Producer
'-Consumer
'}
class USER {
  +telegram_id
}

class AUTHORIZED_USER {
  +telegram_id
  +bookTable()
  +getRestaurantInfo()
  +getMenu()
  +giveFeedback()
}
  abstract class BaseResponseInterface{
+ from_json()
}
class ResponseSample{
+ str image
+ str test
+ from_json()
}

  abstract class BaseRequestInterface {
    + to_json()
  }
class MakeOrderRequest{
+ int number_of_dishes
+ to_json()
}

  class BookingRequest {

+ int table_number
+ int number_of_guests
+ to_json()
  }

  class RestaurantInfoRequest {
+ str info
+ to_json()
  }

  class MenuRequest {
+ str type_of_menu
+ to_json()
  }

  class FeedbackRequest {
+ str feedback_text
+ to_json()
  }


}

package "View" {
class UserInput{
+command
+requires_auth
+controllermethod
+activatied_button_layout
+reg_check()
change_keyboard_and_reply()
try_execute()
on_start()
on_late_auth()
on_contact_recieved()
on_contact_declined()
+on_back()
+on_info()
+on_table_typo()
+on_table()
+on_info_about()

}
  class TelegramView {
    +displayMenu()
    +displayRestaurantInfo()
    +displayBookingForm()
    +displayFeedbackForm()
  }
}

package Rina {
interface RinaAdapter{
push(request)  :   void
pull()  :   response
}

}
package "Controller" {

class RabbitMQ{
}
  class ResponseController{
'  +receive_response_from_rmq()
+ int response
+ BaseResponseInterface response
+ from_json()
  +get_response_from_rina() : Response
  +send_response_to_telegram
  }
  class RequestController{
  + int user_id
+ BaseRequestInterface request_obj
+ str request_type
+ to_json()
+ construct_request()
'  -request:Request
  +send_request_to_Rina(Request)
  +pull_request_from_rmq()  :   BaseRequestInterface
  }
  class TelegramController {

    +send_request()
    +receive_response()
    +send_to_telegram(view)
  }
}
BaseRequestInterface <|-- BookingRequest
BaseRequestInterface <|-- MakeOrderRequest

BaseRequestInterface <|-- RestaurantInfoRequest
BaseRequestInterface <|-- MenuRequest
BaseRequestInterface <|-- FeedbackRequest
BaseResponseInterface <|-- ResponseSample
'TelegramView *--
TelegramController -right-* TelegramView
'ResponseController -> TelegramController
RinaAdapter -- RequestController
RinaAdapter -- ResponseController
ResponseController - TelegramController
RequestController -- TelegramController
ResponseController -- BaseResponseInterface
RequestController - BaseRequestInterface
RabbitMQ -- RequestController
RabbitMQ -- ResponseController
USER <|-- AUTHORIZED_USER
'TelegramController --> Request
'RMQController --> RabbitMQ

@enduml


